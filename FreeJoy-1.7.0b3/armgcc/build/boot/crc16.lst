ARM GAS  /tmp/ccxi58ZY.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"crc16.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MakeCrc16Table,"ax",%progbits
  16              		.align	1
  17              		.global	MakeCrc16Table
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	MakeCrc16Table:
  25              	.LFB29:
  26              		.file 1 "../utils/crc16.c"
   1:../utils/crc16.c **** /**
   2:../utils/crc16.c ****   ******************************************************************************
   3:../utils/crc16.c ****   * @file           : crc16.c
   4:../utils/crc16.c ****   * @brief          : CRC-16 implementation
   5:../utils/crc16.c **** 		
   6:../utils/crc16.c **** 		FreeJoy software for game device controllers
   7:../utils/crc16.c ****     Copyright (C) 2020  Yury Vostrenkov (yuvostrenkov@gmail.com)
   8:../utils/crc16.c **** 
   9:../utils/crc16.c ****     This program is free software: you can redistribute it and/or modify
  10:../utils/crc16.c ****     it under the terms of the GNU General Public License as published by
  11:../utils/crc16.c ****     the Free Software Foundation, either version 3 of the License, or
  12:../utils/crc16.c ****     (at your option) any later version.
  13:../utils/crc16.c **** 
  14:../utils/crc16.c ****     This program is distributed in the hope that it will be useful,
  15:../utils/crc16.c ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../utils/crc16.c ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../utils/crc16.c ****     GNU General Public License for more details.
  18:../utils/crc16.c **** 
  19:../utils/crc16.c ****     You should have received a copy of the GNU General Public License
  20:../utils/crc16.c ****     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  21:../utils/crc16.c **** 		
  22:../utils/crc16.c ****   ******************************************************************************
  23:../utils/crc16.c ****   */
  24:../utils/crc16.c **** 
  25:../utils/crc16.c **** #include "crc16.h"
  26:../utils/crc16.c **** 
  27:../utils/crc16.c **** uint16_t crctable[256];
  28:../utils/crc16.c **** 
  29:../utils/crc16.c **** void MakeCrc16Table(void)
  30:../utils/crc16.c **** {
  27              		.loc 1 30 1 view -0
  28              		.cfi_startproc
ARM GAS  /tmp/ccxi58ZY.s 			page 2


  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31:../utils/crc16.c **** 	uint16_t value;
  31              		.loc 1 31 2 view .LVU1
  32:../utils/crc16.c **** 	uint16_t temp;
  32              		.loc 1 32 2 view .LVU2
  33:../utils/crc16.c **** 	
  34:../utils/crc16.c ****   for(uint16_t i=0; i<256; ++i)
  33              		.loc 1 34 3 view .LVU3
  34              	.LBB2:
  35              		.loc 1 34 7 view .LVU4
  36              	.LVL0:
  37              		.loc 1 34 21 view .LVU5
  38              	.LBE2:
  30:../utils/crc16.c **** 	uint16_t value;
  39              		.loc 1 30 1 is_stmt 0 view .LVU6
  40 0000 70B5     		push	{r4, r5, r6, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 16
  43              		.cfi_offset 4, -16
  44              		.cfi_offset 5, -12
  45              		.cfi_offset 6, -8
  46              		.cfi_offset 14, -4
  47              	.LBB5:
  48              		.loc 1 34 16 view .LVU7
  49 0002 0022     		movs	r2, #0
  50              	.LBB3:
  35:../utils/crc16.c ****   {
  36:../utils/crc16.c ****     value = 0;
  37:../utils/crc16.c ****     temp = i;		
  38:../utils/crc16.c ****     for(uint8_t j=0; j<8; ++j)
  39:../utils/crc16.c ****     {
  40:../utils/crc16.c **** 			if(((value ^ temp) & 0x0001) != 0)
  41:../utils/crc16.c **** 			{				
  42:../utils/crc16.c **** 				value=(value>>1)^POLINOM;
  51              		.loc 1 42 10 view .LVU8
  52 0004 4AF20106 		movw	r6, #40961
  53 0008 0E4D     		ldr	r5, .L10
  54              	.LVL1:
  55              	.L2:
  38:../utils/crc16.c ****     {
  56              		.loc 1 38 22 is_stmt 1 view .LVU9
  57              	.LBE3:
  58              	.LBE5:
  30:../utils/crc16.c **** 	uint16_t value;
  59              		.loc 1 30 1 is_stmt 0 view .LVU10
  60 000a 1046     		mov	r0, r2
  61 000c 0821     		movs	r1, #8
  62              	.LBB6:
  36:../utils/crc16.c ****     temp = i;		
  63              		.loc 1 36 11 view .LVU11
  64 000e 0023     		movs	r3, #0
  65              	.LVL2:
  66              	.L4:
  67              	.LBB4:
  40:../utils/crc16.c **** 			{				
  68              		.loc 1 40 4 is_stmt 1 view .LVU12
ARM GAS  /tmp/ccxi58ZY.s 			page 3


  40:../utils/crc16.c **** 			{				
  69              		.loc 1 40 23 is_stmt 0 view .LVU13
  70 0010 83EA0004 		eor	r4, r3, r0
  40:../utils/crc16.c **** 			{				
  71              		.loc 1 40 6 view .LVU14
  72 0014 14F0010F 		tst	r4, #1
  73 0018 4FEA5303 		lsr	r3, r3, #1
  74              	.LVL3:
  75              		.loc 1 42 5 is_stmt 1 view .LVU15
  76              		.loc 1 42 10 is_stmt 0 view .LVU16
  77 001c 18BF     		it	ne
  78 001e 7340     		eorne	r3, r3, r6
  79 0020 01F1FF31 		add	r1, r1, #-1
  80              	.LVL4:
  81              		.loc 1 42 10 view .LVU17
  82 0024 18BF     		it	ne
  83 0026 9BB2     		uxthne	r3, r3
  84              	.LVL5:
  43:../utils/crc16.c **** 			}
  44:../utils/crc16.c **** 			else	
  45:../utils/crc16.c **** 			{
  46:../utils/crc16.c **** 				value=value>>1;  	
  47:../utils/crc16.c **** 			}
  48:../utils/crc16.c **** 			temp >>= 1;
  85              		.loc 1 48 4 is_stmt 1 view .LVU18
  38:../utils/crc16.c ****     {
  86              		.loc 1 38 5 is_stmt 0 view .LVU19
  87 0028 11F0FF01 		ands	r1, r1, #255
  88              		.loc 1 48 9 view .LVU20
  89 002c C0F34F00 		ubfx	r0, r0, #1, #16
  90              	.LVL6:
  38:../utils/crc16.c ****     {
  91              		.loc 1 38 27 is_stmt 1 view .LVU21
  38:../utils/crc16.c ****     {
  92              		.loc 1 38 22 view .LVU22
  38:../utils/crc16.c ****     {
  93              		.loc 1 38 5 is_stmt 0 view .LVU23
  94 0030 EED1     		bne	.L4
  95              	.LBE4:
  49:../utils/crc16.c **** 		}		
  50:../utils/crc16.c **** 		crctable[i]=value;
  96              		.loc 1 50 3 is_stmt 1 discriminator 2 view .LVU24
  34:../utils/crc16.c ****   {
  97              		.loc 1 34 28 is_stmt 0 discriminator 2 view .LVU25
  98 0032 0132     		adds	r2, r2, #1
  99              	.LVL7:
  34:../utils/crc16.c ****   {
 100              		.loc 1 34 28 discriminator 2 view .LVU26
 101 0034 92B2     		uxth	r2, r2
  34:../utils/crc16.c ****   {
 102              		.loc 1 34 3 discriminator 2 view .LVU27
 103 0036 B2F5807F 		cmp	r2, #256
 104              		.loc 1 50 14 discriminator 2 view .LVU28
 105 003a 25F8023B 		strh	r3, [r5], #2	@ movhi
  34:../utils/crc16.c ****   {
 106              		.loc 1 34 28 is_stmt 1 discriminator 2 view .LVU29
 107              	.LVL8:
ARM GAS  /tmp/ccxi58ZY.s 			page 4


  34:../utils/crc16.c ****   {
 108              		.loc 1 34 21 discriminator 2 view .LVU30
  34:../utils/crc16.c ****   {
 109              		.loc 1 34 3 is_stmt 0 discriminator 2 view .LVU31
 110 003e E4D1     		bne	.L2
 111              	.LBE6:
  51:../utils/crc16.c ****    }
  52:../utils/crc16.c **** }
 112              		.loc 1 52 1 view .LVU32
 113 0040 70BD     		pop	{r4, r5, r6, pc}
 114              	.L11:
 115 0042 00BF     		.align	2
 116              	.L10:
 117 0044 00000000 		.word	crctable
 118              		.cfi_endproc
 119              	.LFE29:
 121              		.section	.text.Crc16,"ax",%progbits
 122              		.align	1
 123              		.global	Crc16
 124              		.syntax unified
 125              		.thumb
 126              		.thumb_func
 127              		.fpu softvfp
 129              	Crc16:
 130              	.LVL9:
 131              	.LFB30:
  53:../utils/crc16.c **** 
  54:../utils/crc16.c **** uint16_t Crc16(uint8_t* buf, uint16_t len)
  55:../utils/crc16.c **** {
 132              		.loc 1 55 1 is_stmt 1 view -0
 133              		.cfi_startproc
 134              		@ args = 0, pretend = 0, frame = 0
 135              		@ frame_needed = 0, uses_anonymous_args = 0
  56:../utils/crc16.c **** 	uint16_t crc = 0;
 136              		.loc 1 56 2 view .LVU34
  57:../utils/crc16.c **** 	
  58:../utils/crc16.c **** 	MakeCrc16Table();
 137              		.loc 1 58 2 view .LVU35
  55:../utils/crc16.c **** 	uint16_t crc = 0;
 138              		.loc 1 55 1 is_stmt 0 view .LVU36
 139 0000 38B5     		push	{r3, r4, r5, lr}
 140              	.LCFI1:
 141              		.cfi_def_cfa_offset 16
 142              		.cfi_offset 3, -16
 143              		.cfi_offset 4, -12
 144              		.cfi_offset 5, -8
 145              		.cfi_offset 14, -4
  55:../utils/crc16.c **** 	uint16_t crc = 0;
 146              		.loc 1 55 1 view .LVU37
 147 0002 0446     		mov	r4, r0
 148 0004 0D46     		mov	r5, r1
 149              		.loc 1 58 2 view .LVU38
 150 0006 FFF7FEFF 		bl	MakeCrc16Table
 151              	.LVL10:
  59:../utils/crc16.c **** 	
  60:../utils/crc16.c ****   for (uint16_t i=0; i<len; ++i)
 152              		.loc 1 60 3 is_stmt 1 view .LVU39
ARM GAS  /tmp/ccxi58ZY.s 			page 5


 153              	.LBB7:
 154              		.loc 1 60 8 view .LVU40
 155              		.loc 1 60 8 is_stmt 0 view .LVU41
 156 000a 2346     		mov	r3, r4
 157              	.LBE7:
  56:../utils/crc16.c **** 	
 158              		.loc 1 56 11 view .LVU42
 159 000c 0020     		movs	r0, #0
 160              	.LBB10:
 161              	.LBB8:
  61:../utils/crc16.c **** 	{
  62:../utils/crc16.c **** 		uint8_t index = (crc ^ buf[i]);
  63:../utils/crc16.c **** 		crc = (uint16_t) ((crc >> 8) ^ crctable[index]);
 162              		.loc 1 63 42 view .LVU43
 163 000e 0749     		ldr	r1, .L15
 164 0010 2544     		add	r5, r5, r4
 165              	.LVL11:
 166              	.L13:
 167              		.loc 1 63 42 view .LVU44
 168              	.LBE8:
  60:../utils/crc16.c **** 	{
 169              		.loc 1 60 22 is_stmt 1 discriminator 1 view .LVU45
  60:../utils/crc16.c **** 	{
 170              		.loc 1 60 3 is_stmt 0 discriminator 1 view .LVU46
 171 0012 AB42     		cmp	r3, r5
 172 0014 00D1     		bne	.L14
 173              	.LBE10:
  64:../utils/crc16.c **** 	}
  65:../utils/crc16.c **** 	
  66:../utils/crc16.c ****   return crc;
  67:../utils/crc16.c **** }
 174              		.loc 1 67 1 view .LVU47
 175 0016 38BD     		pop	{r3, r4, r5, pc}
 176              	.LVL12:
 177              	.L14:
 178              	.LBB11:
 179              	.LBB9:
  62:../utils/crc16.c **** 		crc = (uint16_t) ((crc >> 8) ^ crctable[index]);
 180              		.loc 1 62 3 is_stmt 1 discriminator 3 view .LVU48
  62:../utils/crc16.c **** 		crc = (uint16_t) ((crc >> 8) ^ crctable[index]);
 181              		.loc 1 62 29 is_stmt 0 discriminator 3 view .LVU49
 182 0018 13F8012B 		ldrb	r2, [r3], #1	@ zero_extendqisi2
 183              	.LVL13:
  63:../utils/crc16.c **** 	}
 184              		.loc 1 63 3 is_stmt 1 discriminator 3 view .LVU50
  62:../utils/crc16.c **** 		crc = (uint16_t) ((crc >> 8) ^ crctable[index]);
 185              		.loc 1 62 11 is_stmt 0 discriminator 3 view .LVU51
 186 001c 4240     		eors	r2, r2, r0
 187              	.LVL14:
  63:../utils/crc16.c **** 	}
 188              		.loc 1 63 42 discriminator 3 view .LVU52
 189 001e D2B2     		uxtb	r2, r2
 190 0020 31F81220 		ldrh	r2, [r1, r2, lsl #1]
  63:../utils/crc16.c **** 	}
 191              		.loc 1 63 7 discriminator 3 view .LVU53
 192 0024 82EA1020 		eor	r0, r2, r0, lsr #8
 193              	.LVL15:
ARM GAS  /tmp/ccxi58ZY.s 			page 6


  63:../utils/crc16.c **** 	}
 194              		.loc 1 63 7 discriminator 3 view .LVU54
 195              	.LBE9:
  60:../utils/crc16.c **** 	{
 196              		.loc 1 60 29 is_stmt 1 discriminator 3 view .LVU55
  60:../utils/crc16.c **** 	{
 197              		.loc 1 60 29 is_stmt 0 discriminator 3 view .LVU56
 198 0028 F3E7     		b	.L13
 199              	.L16:
 200 002a 00BF     		.align	2
 201              	.L15:
 202 002c 00000000 		.word	crctable
 203              	.LBE11:
 204              		.cfi_endproc
 205              	.LFE30:
 207              		.comm	crctable,512,2
 208              		.text
 209              	.Letext0:
 210              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 211              		.file 3 "../Drivers/CMSIS/CM3/CoreSupport/core_cm3.h"
 212              		.file 4 "../Drivers/CMSIS/CM3/DeviceSupport/ST/STM32F10x/system_stm32f10x.h"
ARM GAS  /tmp/ccxi58ZY.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 crc16.c
     /tmp/ccxi58ZY.s:16     .text.MakeCrc16Table:0000000000000000 $t
     /tmp/ccxi58ZY.s:24     .text.MakeCrc16Table:0000000000000000 MakeCrc16Table
     /tmp/ccxi58ZY.s:117    .text.MakeCrc16Table:0000000000000044 $d
                            *COM*:0000000000000200 crctable
     /tmp/ccxi58ZY.s:122    .text.Crc16:0000000000000000 $t
     /tmp/ccxi58ZY.s:129    .text.Crc16:0000000000000000 Crc16
     /tmp/ccxi58ZY.s:202    .text.Crc16:000000000000002c $d

NO UNDEFINED SYMBOLS
